{% extends 'base.html.twig' %}

{% block title %}Profil{% endblock %}

{% block body %}

    <div class="container mt-5">
        <img src="images/profile/logo.jpg" alt="logo" style="width:250px">

        <h1>Profil de {{ app.user.prenom ~' '~ app.user.nom }}</h1>

        <br>

        <h2 class="card-title">Vos informations personnelles</h2>

        <table class="table">
            <tbody>
            <tr>
                <th>Prénom</th>
                <td>{{ app.user.prenom }}</td>
            </tr>
            <tr>
                <th>Nom</th>
                <td>{{ app.user.nom }}</td>
            </tr>
            <tr>
                <th>Date de naissance</th>
                <td>{{ app.user.dateNaissance().format('d/m/Y') }}</td>
            </tr>
            <tr>
                <th>Adresse</th>
                <td>{{ app.user.adresse }}</td>
            </tr>
            <tr>
                <th>Code postal</th>
                <td>{{ app.user.codePostal }}</td>
            </tr>
            <tr>
                <th>Ville</th>
                <td>{{ app.user.ville }}</td>
            </tr>
            <tr>
                <th>Numéro de téléphone</th>
                <td>{{ app.user.numeroTelephone }}</td>
            </tr>
            <tr>
                <th>Langue du site</th>
                <td>{{ app.user.isLangueDuSiteFr() ? 'FR' : 'US' }}</td>
            </tr>
            </tbody>
        </table>
        <a href="{{ path('app_profile_identite_edit', {'id': app.user.id}) }}" class="btn btn-lg btn-primary">Editer</a>

        <br>
        <br>

        <h2 class="card-title">Vos informations de connexion</h2>

        <table class="table">
            <tbody>
            <tr>
                <th>Email</th>
                <td>{{ app.user.email }}</td>
            </tr>
            <tr>
                <th>Mot de passe</th>
                <td>******</td>
            </tr>
            </tbody>
        </table>
        <a href="profile/{{ app.user.id }}/connexion/edit" class="btn btn-lg btn-primary">Editer</a>

        <br>
        <br>

        <hr>

        <h2 class="card-title">Votre historique d'emprunts de livres</h2>

        {# liste des emprunts de l'utilisateur  #}

            {% if emprunts is not empty %}
                <ul>
                    {% for emprunt in emprunts %}
                        <li>Emprunté par {{ emprunt.utilisateurs.nom }}, livre: {{ emprunt.livres.nom }}</li>
                        <li>Emprunté le {{ emprunt.dateDemande|date('d/m/Y') }}</li>
                        {% if emprunt.dateRestitutionEffective is not empty  %}
                            <li>Retourné le {{ emprunt.dateRestitutionEffective|date('d/m/Y') }}</li>
                        {% else %}
                            <p>Non retourné est sera retourné le : {{ emprunt.dateRestitutionPrevisionnelle|date('Y-m-d') }}</p>
                        {% endif %}
                    {% endfor %}
                </ul>
            {% else %}
                <p>Aucun emprunt trouvé.</p>
            {% endif %}

        
        <br>
        <br>

        <hr>

        <h2 class="card-title">Votre historique de réservations de salles de travail</h2>

        liste à générer
    </div>
{% endblock %}
